<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/normalize.css"> 
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/getdiscountproduct.css">
    <title>Document</title>
</head>

<body>
    <!--     <!-- 导航栏部分开始 -->
    <nav class="clearfix" id="backTop">
        <div class="logo fl">
            <i class="icon_back_top">&#xe697;</i>
        </div>
        <p>国内折扣</p>
        <div class="app_download fr">
            <a href="http://m.manmanbuy.com/app.html?type=headword&value=wap">
                <img src="./images/download.png" alt="慢慢买APP下载">
            </a>
        </div>
    </nav>
    <!-- 导航栏部分结束 -->
    <!-- 固定下载连接部分开始 -->
    <div class="market">
        <a href="http://m.manmanbuy.com/app.html?type=headword&value=wap">
            <img src="./images/market.png" alt="">
        </a>
    </div>
    <!-- 固定下载连接部分结束 -->
    <!-- 模板内容 -->
    <div class="getdiscountproduct"></div>
    <!-- 模板内容结束 -->
    <!-- footer部分开始 -->
    <footer>
        <div class="foot_func">
            <div class="login">
                <a href="login.html">登录</a>
            </div>
            <div class="signin">
                <a href="register.html">注册</a>
            </div>
            <div class="back_top">
                <a href="#backTop">
                    <i class="icon_back_top">&#xe6a5;</i>返回顶部
                </a>
            </div>
        </div>
        <div class="copyright">
            <p>
                <a href="http://m.manmanbuy.com/app.html?type=headword&value=wap">手机APP下载</a>慢慢买手机版 -- 掌上比价平台</p>
            <p>m.manmanbuy.com</p>
        </div>
    </footer>
    <!-- footer部分结束 -->
</body>
<script src="js/jquery-1.12.2.js"></script>
<script src="js/template-web.js"></script>
<script>
    // get接受api
    $(function () {
        // 获取url选择的参数即后面productid=2，获取2，参数写productid就可以获取，利用沙盒，以防命名重复
        (function ($) {
            $.getUrlParam = function (name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                var r = window.location.search.substr(1).match(reg);
                if (r != null) return unescape(r[2]);
                return null;
            }
        })(jQuery);
        // 获取id值，调用函数值为要被调取的参数
        var id = $.getUrlParam('productid');
        // console.log(id);
        // 接收api
        $.get("http://193.112.55.79:9090/api/getdiscountproduct?productid=" + id + "", function (res) {
            // 设置模板
            var data = template("temp", res);
            // 把模板追加到盒子去
            $(".getdiscountproduct").html(data);
            // console.log(res);
        }, "json")
    })
</script>
</html>
<script type="text/template" id="temp">
    {{each result value }}
    <!-- 商品名字 -->
    <h2>{{value.productName}}</h2>
    <!-- 商品价格 -->
    <strong>{{value.productPrice}}</strong>
    <!-- 商品来源 -->
    <div class="laiyuan">
        <span>{{value.productFrom}}</span>&nbsp;&nbsp;
        <span>{{value.productTime}}</span>&nbsp;&nbsp;
        <span>{{value.productTips}}</span>
    </div>
    <!-- 商品详情内容 -->
    <div class="content">
        <p>{{value.productInfo}}</p>
        <%- value.productImg %>
    </div>
    <!-- 评论，因没有城市库存，从而将评论与商品详情放在一起 -->
    <div class="pl">
            <%- value.productComment %>
    </div>
    <!-- 购买按钮 -->
    <div class="gm">
        <a href="javascript:;">确认购买</a>
    </div>
    {{/each}}
</script>